<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_account_analytic_account_form_custom" model="ir.ui.view">
        <field name="name">Custom Analytic Account Form</field>
        <field name="model">account.analytic.account</field>
        <field name="inherit_id" ref="analytic.view_account_analytic_account_form"/>
        <field name="arch" type="xml">
            <!-- Agregar el widget statinfo -->
            <xpath expr="//sheet" position="before">
                <div class="oe_statinfo">
                    <button name="action_open_partner_history" type="object"
                            class="oe_stat_button" icon="fa-map-marker"
                            invisible="partner_history_count == 0">
                        <field name="partner_history_count" widget="statinfo" string="Historial de Ubicaciones" 
                               icon="fa-map-marker">
                            <attribute name="context">{'default_analytic_account_id': id}</attribute>
                        </field>
                    </button>
                </div>
            </xpath>

            <!-- Agregar el campo location_id debajo de group_id -->
            <xpath expr="//field[@name='plan_id']" position="after">
                <field name="location_id" placeholder="Select a location"/>
            </xpath>
        </field>
    </record>

</odoo>
